# ngx-center

一个中心,多个......

# 这是什么?
- 一个共享angular运行时环境的解决方案

# 目前的打包构建方案
## 无懒加载
- 就是路由都是具名引用`{path:"xxx",component:XXXComponent}`
### 优点
- 不用想那么多,打包就是一个文件

### 缺点
- 所有功能一个文件,太大了
- 当项目足够大时,打包速度慢,内存占用高,开发时等待重新编译时间长
## 懒加载
- `{path:"xxx",loadChildren:()=>import('xxx').then((item)=>XXXModule)}`

### 优点
- 每个功能的路由只在请求时加载,减少文件加载

### 缺点
- 打包速度会相对增长一些
- 当项目足够大时,打包速度慢,内存占用高,开发时等待重新编译时间长
> 会比`无懒加载`方式更容易达到上限

## 多ng实例
- 也就是通过自建的桥,连接了各ng项目
- 另一个名字叫做`微前端`
### 优点
- 解决了前面的速度问题
- 功能的添加/修改不需要编译整个项目,仅仅是各个被影响的模块
- 每个实例的依赖版本独立,互不影响
- 不仅是ng,其他的也可以加载
### 缺点
- 每个实例自带一个ng运行实例,通讯只能依靠桥来连接
- 加载的时候,由于无依赖共享,每个项目大小过大

## 单运行时共享依赖(本项目实现)
- 通过ng自身的功能,依赖工程化,将各个项目独立打包
- 在整个项目可控的情况下,项目的主技术栈为ng时,纯ng的实现方案

### 优点
- 每个项目使用主项目的依赖(假如主项目有)
- 编译及开发时重新编译的粒度小,速度极快
- 解决`项目`被`主项目`加载时的代码变更重新编译后自动刷新问题
- 子项目也可以加载子项目,并且子项目同时可以使用`import`
> 即子项目同时可以使用`主项目加载子项目`的方式加载子项目,也可以使用ng原始的懒加载方式编写逻辑
- 可以直接调用主项目的服务,模块及组件,同之前开发相比,开发无感知,不需要学习多余的东西
- 可以加载的子项目数量极多
> 由于没有独立的运行时及一些组件库依赖,所以每个子项目只有运行逻辑,空间大小增长缓慢

### 缺点
- 由于使用主项目的依赖,所以主项目的依赖部分不能摇树,不能进行变量名破坏,会使主项目比正常打包时的基本大小大一些


# 命令
- 依赖的是Angular的`ng generate`命令,快速生成开发骨架
- 建议先在新项目中使用,待了解实现后,再使用到已有项目中
## 主项目初始化
- 运行`npx ng g ngx-center:main-init`

## 子项目生成
- 运行`npx ng g ngx-center:sub`
